<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análisis Interactivo de Probabilidades - Coljuegos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutral with Teal Accents -->
    <!-- Application Structure Plan: A dashboard-style SPA. It features a left sidebar for match navigation, filterable by sport (MLB/Fútbol). The main content area on the right displays details for the selected match. This includes a header, key probability visualizations (donut chart for adjusted odds, grouped bar chart for comparing simulated vs. adjusted), and a tabbed interface for detailed textual analysis (Adjustment Summary, Key Factors, Simulation Data). This structure was chosen to manage the high information density per match, preventing user overload and facilitating a clear, focused exploration of the data and the reasoning behind the adjustments. -->
    <!-- Visualization & Content Choices: 
        - Match List (Sidebar): Goal: Organize/Navigate. Method: Dynamic HTML list with JS. Justification: Provides quick, intuitive access to all matches.
        - Adjusted Probability Donut Chart: Goal: Inform. Method: Chart.js Canvas. Justification: Offers an immediate, high-level visual summary of the final adjusted outcome probability for the selected match.
        - Probability Comparison Bar Chart: Goal: Compare. Method: Chart.js Canvas (Grouped Bar). Justification: This is the core visualization, allowing for a detailed, side-by-side comparison of initial (simulated, implicit) vs. final (adjusted) probabilities, highlighting the impact of the analysis.
        - Tabbed Analysis: Goal: Organize/Inform. Method: HTML/CSS/JS. Justification: Breaks down the dense qualitative analysis into digestible, thematic sections, making it easier for the user to understand the 'why' behind the numbers without being overwhelmed by text.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f7f4; /* Warm neutral background */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 40vh;
        }
        .sidebar-item.active {
            background-color: #e6f1f2; /* Light Teal accent */
            color: #0d7377; /* Dark Teal accent */
            font-weight: 600;
        }
        .tab-btn.active {
            border-bottom-color: #32a1a1; /* Teal accent */
            color: #146c70;
        }
        .prose-custom {
            color: #374151;
        }
        .prose-custom h3 {
            color: #111827;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        .prose-custom p {
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        .prose-custom ul {
            list-style-position: inside;
            padding-left: 0;
        }
        .prose-custom li {
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="flex flex-col md:flex-row h-screen">
        <!-- Sidebar -->
        <aside class="w-full md:w-80 lg:w-96 bg-white border-r border-gray-200 flex-shrink-0 flex flex-col">
            <div class="p-4 border-b border-gray-200">
                <h1 class="text-xl font-bold text-gray-800">Análisis de Partidos</h1>
                <p class="text-sm text-gray-500">23 de Junio, 2025</p>
            </div>
            <div class="p-4 border-b border-gray-200">
                <div class="flex space-x-2">
                    <button id="filter-all" class="flex-1 px-3 py-2 text-sm font-medium text-white bg-[#0d7377] rounded-md shadow-sm">Todos</button>
                    <button id="filter-mlb" class="flex-1 px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md">MLB</button>
                    <button id="filter-futbol" class="flex-1 px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md">Fútbol</button>
                </div>
            </div>
            <div id="match-list" class="overflow-y-auto flex-grow p-2">
                <!-- Match list will be populated by JS -->
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 bg-[#f8f7f4] p-4 md:p-8 overflow-y-auto">
            <div id="main-content-area">
                <!-- Content will be populated by JS -->
                <div id="match-header" class="mb-6 pb-4 border-b border-gray-300">
                    <h2 id="match-title" class="text-3xl font-bold text-gray-900"></h2>
                    <p id="match-league" class="text-md text-gray-600"></p>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-md mb-8">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Probabilidades Ajustadas Finales</h3>
                    <p class="text-sm text-gray-600 mb-4">
                        Esta visualización muestra la probabilidad de resultado final después de considerar todos los factores de análisis como lesiones, rendimiento reciente y tendencias del mercado.
                    </p>
                    <div class="chart-container h-64 max-h-[300px]">
                        <canvas id="adjustedProbChart"></canvas>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-md mb-8">
                     <h3 class="text-xl font-semibold mb-4 text-gray-800">Comparación de Probabilidades: Simulación vs. Realidad</h3>
                     <p class="text-sm text-gray-600 mb-4">
                        Este gráfico compara las probabilidades de la simulación inicial con las probabilidades implícitas del mercado y el ajuste final del análisis. Permite identificar dónde el análisis experto ha modificado más significativamente la perspectiva inicial.
                    </p>
                    <div class="chart-container h-96 max-h-[450px]">
                        <canvas id="comparisonProbChart"></canvas>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Análisis Detallado</h3>
                     <p class="text-sm text-gray-600 mb-4">
                        Explore las diferentes facetas del análisis para entender a fondo la justificación detrás de las probabilidades ajustadas.
                    </p>
                    <div class="border-b border-gray-200">
                        <nav id="tabs" class="-mb-px flex space-x-6">
                           <!-- Tabs will be populated by JS -->
                        </nav>
                    </div>
                    <div id="tab-content" class="pt-6 prose-custom">
                        <!-- Tab content will be populated by JS -->
                    </div>
                </div>
            </div>
             <div id="welcome-screen" class="h-full flex flex-col items-center justify-center text-center">
                <div class="max-w-2xl">
                    <svg class="mx-auto h-20 w-20 text-[#32a1a1]" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3v11.25A2.25 2.25 0 0 0 6 16.5h12A2.25 2.25 0 0 0 20.25 14.25V5.25A2.25 2.25 0 0 0 18 3H6A2.25 2.25 0 0 0 3.75 3ZM3.75 14.25v-1.5a1.125 1.125 0 0 1 1.125-1.125h1.5a1.125 1.125 0 0 1 1.125 1.125v1.5m-3.75 0h3.75M9 13.5v-3m-3 3v-3m3 3h3v-3h-3m-3 0h3m9 3.75h.008v.008H18V18Zm-3.75 0h.008v.008h-.008v-.008Zm0 0h.008v.008h-.008v-.008Zm-3.75 0h.008v.008h-.008v-.008Zm0 0h.008v.008h-.008v-.008Z" />
                    </svg>
                    <h2 class="mt-6 text-3xl font-bold tracking-tight text-gray-900">Bienvenido al Analizador de Probabilidades</h2>
                    <p class="mt-4 text-lg text-gray-600">Por favor, seleccione un partido de la lista a la izquierda para comenzar el análisis interactivo.</p>
                </div>
            </div>
        </main>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const matchData = {
        'mlb_orioles_rangers': {
            sport: 'MLB', league: 'MLB', teams: { local: 'Baltimore Orioles', visitor: 'Texas Rangers' },
            probabilities: {
                initial_implied: { local: 57.4, visitor: 42.6 },
                initial_simulated: { local: 59.7, visitor: 27.5, draw: 12.8 },
                adjusted: { local: 49.0, visitor: 51.0 }
            },
            analysis: {
                justification: "La simulación inicial otorga una probabilidad significativamente alta a los Orioles. Sin embargo, la grave situación de lesiones en su cuerpo de lanzadores, incluyendo varios abridores clave y a su receptor estrella Adley Rutschman, no parece estar completamente reflejada. La predicción de expertos que favorece a los Rangers y las cuotas de mercado más ajustadas refuerzan la idea de que la probabilidad de los Orioles podría estar inflada. El ajuste acerca el resultado a un partido más equilibrado.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Lesiones Orioles:</b> Kyle Bradish, Grayson Rodriguez, Tyler Wells (abridores), Albert Suarez (relevista), y el receptor Adley Rutschman están fuera. Esto afecta gravemente la profundidad del pitcheo.</li><li><b>Lesiones Rangers:</b> Jon Gray (abridor), Jake Burger (1B) y Cody Bradford (relevista) en la lista de lesionados.</li><li><b>Análisis de Expertos:</b> Una predicción de Bleacher Nation sugiere una victoria de los Rangers 6-5.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Carreras Totales:</b> 9.6</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>5-4 (frecuencia: 41/1000)</li><li>5-3 (frecuencia: 39/1000)</li><li>4-4 (frecuencia: 39/1000)</li></ul>"
            }
        },
        'mlb_braves_mets': {
            sport: 'MLB', league: 'MLB', teams: { local: 'Atlanta Braves', visitor: 'New York Mets' },
            probabilities: {
                initial_implied: { local: 58.2, visitor: 41.8 },
                initial_simulated: { local: 64.3, visitor: 24.2, draw: 11.5 },
                adjusted: { local: 50.0, visitor: 50.0 }
            },
            analysis: {
                justification: "La simulación asigna una probabilidad muy alta a los Braves. Sin embargo, la lesión de su lanzador as, Chris Sale, es un factor de gran peso que la simulación probablemente no ha incorporado en su totalidad. Aunque el abridor de los Mets, Paul Blackburn, ha tenido dificultades, la pérdida de un as como Sale tiene un impacto sustancial y hace el partido mucho más competitivo de lo que se sugiere inicialmente.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Lesión Clave Braves:</b> El lanzador as Chris Sale, ganador del Cy Young 2024, está en la lista de lesionados por 15 días. Su ausencia es un 'golpe brutal' para el equipo.</li><li><b>Duelo de Lanzadores:</b> Spencer Schwellenbach (Braves) tiene un ERA de 3.26, mientras que Paul Blackburn (Mets) ha tenido un ERA de 6.92 en sus últimas apariciones.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Carreras Totales:</b> 8.5</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>5-4 (frecuencia: 41/1000)</li><li>4-3 (frecuencia: 37/1000)</li><li>5-3 (frecuencia: 34/1000)</li></ul>"
            }
        },
        'mlb_reds_yankees': {
            sport: 'MLB', league: 'MLB', teams: { local: 'Cincinnati Reds', visitor: 'New York Yankees' },
            probabilities: {
                initial_implied: { local: 49.3, visitor: 50.7 },
                initial_simulated: { local: 44.0, visitor: 43.3, draw: 12.7 },
                adjusted: { local: 48.0, visitor: 52.0 }
            },
            analysis: {
                justification: "Las probabilidades implícitas y simuladas sugieren un partido muy parejo. A pesar de las numerosas lesiones en el pitcheo de ambos equipos, el récord general superior de los Yankees (44-32 vs 39-38 de los Reds) y su sólido desempeño como favoritos (42-26) sugieren que su probabilidad de victoria podría estar ligeramente subestimada por la simulación. El ajuste les da una ligera ventaja.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Lesiones Pitcheo Yankees:</b> Gerrit Cole (fuera por la temporada), Luis Gil y JT Brubaker están lesionados.</li><li><b>Lesiones Pitcheo Reds:</b> Brandon Williamson, Julian Aguiar (fuera por la temporada), Rhett Lowder y Graham Ashcraft están lesionados.</li><li><b>Récord General:</b> Los Yankees tienen un mejor récord general.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Carreras Totales:</b> 9.6</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>4-5 (frecuencia: 31/1000)</li><li>4-4 (frecuencia: 29/1000)</li><li>5-5 (frecuencia: 28/1000)</li></ul>"
            }
        },
        'mlb_whitesox_dbacks': {
            sport: 'MLB', league: 'MLB', teams: { local: 'Chicago White Sox', visitor: 'Arizona Diamondbacks' },
            probabilities: {
                initial_implied: { local: 43.5, visitor: 56.5 },
                initial_simulated: { local: 27.5, visitor: 59.1, draw: 13.4 },
                adjusted: { local: 29.0, visitor: 71.0 }
            },
            analysis: {
                justification: "La simulación favorece fuertemente a los Diamondbacks, y el análisis externo lo confirma. La disparidad en el rendimiento es notable: los White Sox tienen un récord muy pobre (24-53), una ofensiva débil (puesto 28 en carreras) y un bullpen mediocre. Los Diamondbacks, en cambio, tienen una ofensiva potente (3er lugar en carreras) y su lanzador abridor, Eduardo Rodríguez, ha mostrado mejoría reciente. Se justifica una fuerte inclinación hacia los D-backs.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Rendimiento White Sox:</b> Récord muy negativo (24-53), bullpen en el puesto 21 de ERA, ofensiva en el puesto 28.</li><li><b>Rendimiento D-backs:</b> Ofensiva potente (3er lugar en carreras), récord de 39-37.</li><li><b>Lanzador D-backs:</b> Eduardo Rodríguez ha mejorado, permitiendo 2 o menos carreras en sus últimas 3 aperturas.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Carreras Totales:</b> 8.7</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>3-5 (frecuencia: 41/1000)</li><li>4-5 (frecuencia: 38/1000)</li><li>3-6 (frecuencia: 36/1000)</li></ul>"
            }
        },
        'mlb_brewers_pirates': {
            sport: 'MLB', league: 'MLB', teams: { local: 'Milwaukee Brewers', visitor: 'Pittsburgh Pirates' },
            probabilities: {
                initial_implied: { local: 65.5, visitor: 34.5 },
                initial_simulated: { local: 76.7, visitor: 14.4, draw: 8.9 },
                adjusted: { local: 68.0, visitor: 32.0 }
            },
            analysis: {
                justification: "La simulación otorga una probabilidad de victoria extremadamente alta a los Brewers en comparación con las implícitas. Aunque los Pirates tienen una ofensiva y un récord general muy débiles, los Brewers también tienen lesiones importantes en el pitcheo. Sin embargo, las dificultades ofensivas de los Pirates son tan pronunciadas que los Brewers, incluso con sus propias lesiones, deberían mantener una ventaja considerable. La simulación podría estar sobreestimando ligeramente la confianza, pero el desequilibrio fundamental persiste.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Lanzador Brewers:</b> Colin Rea (3-7, ERA de 3.50).</li><li><b>Récord Brewers:</b> 42-35.</li><li><b>Ofensiva Pirates:</b> Menor cantidad de carreras en la liga (3.3 por partido), últimos en jonrones (53), promedio de bateo de .227 (puesto 28).</li><li><b>Récord Pirates:</b> 30-48.</li><li><b>Lesiones:</b> Ambos equipos tienen lesiones significativas en el pitcheo.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Carreras Totales:</b> 8.6</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>4-2 (frecuencia: 39/1000)</li><li>5-2 (frecuencia: 37/1000)</li><li>5-3 (frecuencia: 36/1000)</li></ul>"
            }
        },
        'mlb_twins_mariners': {
            sport: 'MLB', league: 'MLB', teams: { local: 'Minnesota Twins', visitor: 'Seattle Mariners' },
            probabilities: {
                initial_implied: { local: 44.4, visitor: 55.6 },
                initial_simulated: { local: 31.6, visitor: 54.8, draw: 13.6 },
                adjusted: { local: 49.0, visitor: 51.0 }
            },
            analysis: {
                justification: "Tanto las probabilidades implícitas como las simuladas favorecen a los Mariners. Sin embargo, la lesión de Bryce Miller es un factor significativo que debería reducir la probabilidad de victoria de los Mariners. Aunque los Mariners tienen un récord y una ofensiva ligeramente mejores, la pérdida de Miller es un revés sustancial que la simulación podría no haber capturado completamente. Se justifica una reducción de la probabilidad de los Mariners y un aumento para los Twins, acercando el partido a las probabilidades implícitas.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Lesión Mariners:</b> Lanzador abridor Bryce Miller (ERA 5.73) en la lista de lesionados por molestias en el codo; requerirá inyección de PRP y recuperación de 4-6 semanas. Logan Evans lo reemplazará.</li><li><b>Récord:</b> Mariners (39-37) vs Twins (37-40).</li><li><b>Estadísticas Ofensivas:</b> Mariners (4.57 carreras/partido, 101 jonrones) vs Twins (4.26 carreras/partido, 86 jonrones).</li><li><b>ERA de Equipo:</b> Twins (4.06) ligeramente mejor que Mariners (4.18).</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Carreras Totales:</b> 8.6</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>3-4 (frecuencia: 47/1000)</li><li>2-4 (frecuencia: 40/1000)</li><li>4-3 (frecuencia: 35/1000)</li></ul>"
            }
        },
        'mlb_cardinals_cubs': {
            sport: 'MLB', league: 'MLB', teams: { local: 'St. Louis Cardinals', visitor: 'Chicago Cubs' },
            probabilities: {
                initial_implied: { local: 53.5, visitor: 46.5 },
                initial_simulated: { local: 51.9, visitor: 36.2, draw: 11.9 },
                adjusted: { local: 49.0, visitor: 51.0 }
            },
            analysis: {
                justification: "Las probabilidades implícitas favorecen ligeramente a los Cardinals, mientras que la simulación también lo hace, pero con una alta probabilidad de 'empate' y una probabilidad más baja para los Cubs. El mejor récord general de los Cubs y el rendimiento excepcional de su bullpen son factores importantes. Aunque ambos lanzadores abridores tienen métricas subyacentes que sugieren mejor rendimiento, el bullpen de los Cubs es una ventaja significativa. Sin embargo, las lesiones en el pitcheo abridor de los Cubs son una preocupación. Se justifica un ajuste que los favorezca ligeramente.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Lanzador Cardinals:</b> Matthew Liberatore (ERA de 4.08, FIP de 3.04).</li><li><b>Lanzador Cubs:</b> Ben Brown (ERA de 5.57, FIP de 3.44, 10.7 K/9).</li><li><b>Bullpen Cubs:</b> ERA de 2.39 desde el 1 de mayo, liderando la liga.</li><li><b>Récord:</b> Cubs (46-31) mejor que Cardinals (42-36).</li><li><b>Lesiones:</b> Ambos equipos tienen lesiones en jugadores clave; Cubs con más lesiones significativas en el pitcheo abridor.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Carreras Totales:</b> 8.6</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>4-2 (frecuencia: 39/1000)</li><li>5-2 (frecuencia: 37/1000)</li><li>5-3 (frecuencia: 36/1000)</li></ul>"
            }
        },
        'mlb_angels_redsox': {
            sport: 'MLB', league: 'MLB', teams: { local: 'Los Angeles Angels', visitor: 'Boston Red Sox' },
            probabilities: {
                initial_implied: { local: 44.4, visitor: 55.6 },
                initial_simulated: { local: 30.4, visitor: 59.0, draw: 10.6 },
                adjusted: { local: 55.0, visitor: 45.0 }
            },
            analysis: {
                justification: "Tanto las probabilidades implícitas como las simuladas favorecen a los Red Sox. Sin embargo, el estado actual del pitcheo de los Red Sox es catastrófico, con múltiples lanzadores abridores clave lesionados o inactivos. La salida de Rafael Devers también debilita su ofensiva. Aunque las estadísticas generales de los Angels no son destacadas, la situación de los Red Sox hace que su ventaja simulada sea altamente cuestionable. Este partido debería ser mucho más parejo, o incluso favorecer a los Angels, dada la magnitud de los problemas de personal de los Red Sox.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Lesiones Red Sox:</b> Kutter Crawford (abridor, rodilla/muñeca, fuera toda la temporada), Hunter Dobbins (abridor, distensión en el codo, 15 días), Tanner Houck (abridor) y Patrick Sandoval (abridor) también lesionados.</li><li><b>Traspaso Red Sox:</b> Rafael Devers (jugador ofensivo clave) traspasado.</li><li><b>Estadísticas Angels:</b> ERA de equipo de 4.60 (puesto 24), promedio de bateo de .226 (puesto 29), penúltimos en ponches por partido.</li><li><b>Lanzador Angels:</b> W. Buehler (ERA de 5.95).</li><li><b>Récord:</b> Red Sox (40-38) vs Angels (37-39).</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Carreras Totales:</b> 9.4</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>6-4 (frecuencia: 37/1000)</li><li>5-4 (frecuencia: 36/1000)</li><li>5-3 (frecuencia: 31/1000)</li></ul>"
            }
        },
        'mlb_padres_nationals': {
            sport: 'MLB', league: 'MLB', teams: { local: 'San Diego Padres', visitor: 'Washington Nationals' },
            probabilities: {
                initial_implied: { local: 0, visitor: 0 },
                initial_simulated: { local: 0, visitor: 0, draw: 0 },
                adjusted: { local: 60.0, visitor: 40.0 }
            },
            analysis: {
                justification: "Dado que no se proporcionaron datos de simulación para este partido, no se pueden realizar ajustes de probabilidad. Sin embargo, si se dispusiera de datos, las importantes lesiones en el pitcheo de los Padres serían un factor crucial que podría reducir su probabilidad de victoria a pesar de su mejor récord general contra los Nationals. La ausencia de datos para este partido resalta una limitación en el modelo de simulación actual. Para futuras iteraciones, sería beneficioso investigar la causa de esta insuficiencia de datos e implementar estrategias para obtener la información necesaria o proporcionar un método de estimación alternativo.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Lesiones Padres:</b> Joe Musgrove (abridor, fuera por la temporada), Yu Darvish (abridor, codo), Matt Waldron (abridor, isquiotibiales) y Michael King (abridor, nervio pinzado) lesionados.</li><li><b>Lesiones Nationals:</b> Paul DeJong (tercera base), Cade Cavalli (abridor) y DJ Herz (abridor) lesionados.</li><li><b>Récord General:</b> Padres tienen un récord superior (41-35) que Nationals (32-45).</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>No hay datos de simulación disponibles para este partido.</b></p>"
            }
        },
        'futbol_seattle_psg': {
            sport: 'futbol', league: 'Mundial de Clubes (FIFA)', teams: { local: 'Seattle Sounders', visitor: 'PSG' },
            probabilities: {
                initial_implied: { local: 4.4, draw: 11.5, visitor: 84.1 },
                initial_simulated: { local: 1.5, draw: 11.2, visitor: 87.3 },
                adjusted: { local: 1.0, draw: 9.0, visitor: 90.0 }
            },
            analysis: {
                justification: "Tanto las probabilidades implícitas como las simuladas favorecen abrumadoramente al PSG. El análisis cualitativo confirma una 'brecha sísmica' en calidad entre los dos equipos. A pesar de una derrota previa que sirvió como 'llamada de atención', se espera que el PSG, campeón de la Champions League, domine. La motivación del PSG y las múltiples lesiones de los Sounders justifican una probabilidad de victoria aún mayor para el equipo parisino.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Calidad de Equipo:</b> El PSG es el campeón de la UEFA Champions League.</li><li><b>Motivación:</b> Una derrota previa podría aumentar la concentración del PSG.</li><li><b>Lesiones Seattle:</b> Los Sounders tienen múltiples preocupaciones por lesiones y necesitan una victoria improbable por 3 goles para avanzar.</li><li><b>Lesiones PSG:</b> Ousmané Dembélé está lesionado, pero jugadores clave como Nuno Mendes y Marquinhos regresan.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 2.51</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>0-2 (frecuencia: 111/1000)</li><li>0-1 (frecuencia: 101/1000)</li><li>0-3 (frecuencia: 98/1000)</li></ul>"
            }
        },
        'futbol_atletico_botafogo': {
            sport: 'futbol', league: 'Mundial de Clubes (FIFA)', teams: { local: 'Atlético de Madrid', visitor: 'Botafogo' },
            probabilities: {
                initial_implied: { local: 59.6, draw: 24.3, visitor: 16.1 },
                initial_simulated: { local: 68.6, draw: 22.6, visitor: 8.8 },
                adjusted: { local: 60.0, draw: 28.0, visitor: 12.0 }
            },
            analysis: {
                justification: "La simulación favorece fuertemente al Atlético, más que las probabilidades implícitas. Sin embargo, la excelente forma de Botafogo, destacando su 'actuación defensiva monstruosa' en la victoria 1-0 sobre el PSG, es un factor crucial que la simulación podría haber subestimado. La necesidad del Atlético de ganar por goleada choca con el enfoque táctico típicamente cauto de Simeone. Esto sugiere que la probabilidad de victoria del Atlético está sobrevalorada en la simulación.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Forma Botafogo:</b> Vienen de 5 victorias consecutivas, incluyendo una portería a cero contra el PSG.</li><li><b>Táctica Atlético:</b> A pesar de necesitar 3 goles para clasificar, no se espera que Simeone opte por una alineación 'súper agresiva'.</li><li><b>Regresos Atlético:</b> Antoine Griezmann probablemente regresará a la alineación titular.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 2.04</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-0 (frecuencia: 173/1000)</li><li>2-0 (frecuencia: 149/1000)</li><li>0-0 (frecuencia: 111/1000)</li></ul>"
            }
        },
        'futbol_city_alain': {
            sport: 'futbol', league: 'Mundial de Clubes (FIFA)', teams: { local: 'Manchester City', visitor: 'Al Ain FC' },
            probabilities: {
                initial_implied: { local: 85.5, draw: 9.5, visitor: 5.0 },
                initial_simulated: { local: 85.7, draw: 12.4, visitor: 1.9 },
                adjusted: { local: 89.0, draw: 9.0, visitor: 2.0 }
            },
            analysis: {
                justification: "Las probabilidades favorecen abrumadoramente al Manchester City. La capacidad del City para rotar 11 jugadores y aun así ganar por un amplio margen en su partido anterior, mientras que Al Ain perdió 5-0 contra la Juventus, confirma su superioridad masiva. Las probabilidades simuladas para Al Ain son muy bajas y parecen justificadas; el ajuste incluso aumenta ligeramente la probabilidad del City.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Profundidad Plantilla City:</b> El equipo rotó 11 jugadores y ganó de forma convincente, con jugadores como Claudio Echeverri y Oscar Bobb impresionando.</li><li><b>Forma Reciente Al Ain:</b> Perdieron su partido anterior por 5-0.</li><li><b>Calidad General:</b> Existe una brecha de calidad inmensa entre ambos equipos.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 2.49</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>2-0 (frecuencia: 131/1000)</li><li>3-0 (frecuencia: 121/1000)</li><li>1-0 (frecuencia: 99/1000)</li></ul>"
            }
        },
        'futbol_operario_novo': {
            sport: 'futbol', league: 'Brasileirão Série B (Brasil)', teams: { local: 'Operário Ferroviário', visitor: 'Grêmio Novorizontino' },
            probabilities: {
                initial_implied: { local: 54.8, draw: 24.3, visitor: 20.9 },
                initial_simulated: { local: 57.7, draw: 28.1, visitor: 14.2 },
                adjusted: { local: 35.0, draw: 30.0, visitor: 35.0 }
            },
            analysis: {
                justification: "La simulación otorga a Operário una probabilidad de victoria muy alta. Sin embargo, la forma reciente de Novorizontino es excepcional (5 victorias seguidas, diferencia de goles de 10:1, 2do en la tabla), mientras que Operário tiene un récord perdedor. El historial de enfrentamientos directos también favorece a Novorizontino. La simulación parece subestimar masivamente a Novorizontino, por lo que el ajuste equilibra el partido, reflejando la excelente forma del visitante.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Forma Novorizontino:</b> Excepcional, con 5 victorias consecutivas y ocupando el 2do lugar en la Serie B.</li><li><b>Forma Operário:</b> Récord general de 4 victorias, 2 empates y 6 derrotas.</li><li><b>H2H:</b> El historial de enfrentamientos directos favorece a Novorizontino.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 2.04</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-0 (frecuencia: 153/1000)</li><li>0-0 (frecuencia: 141/1000)</li><li>2-0 (frecuencia: 111/1000)</li></ul>"
            }
        },
        'futbol_everton_ohiggins': {
            sport: 'futbol', league: 'Primera División de Chile', teams: { local: 'Everton', visitor: "O'Higgins" },
            probabilities: {
                initial_implied: { local: 37.0, draw: 29.9, visitor: 33.1 },
                initial_simulated: { local: 41.4, draw: 30.4, visitor: 28.2 },
                adjusted: { local: 0.0, draw: 0.0, visitor: 100.0 }
            },
            analysis: {
                justification: "El informe de simulación es para el 23 de junio de 2025. Los datos de fuentes externas indican que el partido ya se jugó en esa fecha, con un resultado final de Everton 0-1 O'Higgins. Dado que el resultado del partido ya se conoce, las probabilidades ajustadas deben reflejar el resultado real, anulando cualquier cálculo predictivo.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Resultado Real:</b> El partido ya se jugó y el resultado fue 0-1 a favor de O'Higgins.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 1.83</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-1 (frecuencia: 139/1000)</li><li>1-0 (frecuencia: 131/1000)</li><li>0-0 (frecuencia: 121/1000)</li></ul>"
            }
        },
        'futbol_jaguares_patriotas': {
            sport: 'futbol', league: 'Categoría Primera A (Colombia)', teams: { local: 'Jaguares de Córdoba', visitor: 'Patriotas FC' },
            probabilities: {
                initial_implied: { local: 61.5, draw: 23.1, visitor: 15.4 },
                initial_simulated: { local: 67.4, draw: 24.8, visitor: 7.8 },
                adjusted: { local: 55.0, draw: 35.0, visitor: 10.0 }
            },
            analysis: {
                justification: "La simulación favorece fuertemente a Jaguares. Sin embargo, el reciente empate 0-0 y el historial de enfrentamientos directos sugieren que Jaguares tiene dificultades para vencer a Patriotas de manera decisiva. Dada la reciente igualdad y la forma decente de Patriotas, la probabilidad simulada para Jaguares podría ser demasiado alta y la probabilidad de empate demasiado baja.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Enfrentamiento Reciente:</b> Un empate 0-0 el 19 de junio de 2025.</li><li><b>Forma Reciente:</b> Jaguares tiene 2 victorias en sus últimos 5 partidos; Patriotas 3 victorias en sus últimos 5.</li><li><b>Historial H2H:</b> En los últimos 5 directos, Jaguares ganó 2 veces y hubo 3 empates.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 2.07</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-0 (frecuencia: 191/1000)</li><li>2-0 (frecuencia: 176/1000)</li><li>0-0 (frecuencia: 126/1000)</li></ul>"
            }
        },
        'futbol_mushucruna_barcelona': {
            sport: 'futbol', league: 'Serie A de Ecuador', teams: { local: 'Mushuc Runa', visitor: 'Barcelona SC' },
            probabilities: {
                initial_implied: { local: 26.6, draw: 29.1, visitor: 44.3 },
                initial_simulated: { local: 20.4, draw: 30.6, visitor: 49.0 },
                adjusted: { local: 0.0, draw: 0.0, visitor: 100.0 }
            },
            analysis: {
                justification: "El informe de simulación es para el 23 de junio de 2025. Los datos de fuentes externas indican que el partido ya se jugó en esa fecha, con un resultado final de Mushuc Runa 0-5 Barcelona SC. Al igual que en el partido Everton vs O'Higgins, el resultado real de este partido ya está disponible. Por lo tanto, las probabilidades ajustadas deben reflejar el resultado factual. Esto resalta la importancia de los datos en tiempo real y cómo pueden invalidar las predicciones.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Resultado Real:</b> El partido ya se jugó y el resultado fue 0-5 a favor de Barcelona SC.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 5.0 (Resultado Real)</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-0 (frecuencia: 161/1000)</li><li>0-0 (frecuencia: 155/1000)</li><li>1-1 (frecuencia: 141/1000)</li></ul>"
            }
        },
        'futbol_pk35_sjkakatemia': {
            sport: 'futbol', league: 'Ykkönen (Finlandia)', teams: { local: 'PK-35 Vantaa', visitor: 'SJK Akatemia' },
            probabilities: {
                initial_implied: { local: 39.9, draw: 29.6, visitor: 30.6 },
                initial_simulated: { local: 40.5, draw: 29.9, visitor: 29.6 },
                adjusted: { local: 39.0, draw: 30.0, visitor: 31.0 }
            },
            analysis: {
                justification: "Las probabilidades implícitas y simuladas son muy similares, sugiriendo un partido reñido con una ligera ventaja para PK-35 Vantaa. SJK Akatemia presenta una forma reciente ligeramente mejor. Dada esta ligera ventaja en la forma reciente y el historial de enfrentamientos directos que muestra un equilibrio, la simulación podría estar sobrevalorando ligeramente a PK-35 Vantaa.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Forma PK-35 Vantaa:</b> 1 victoria en sus últimos 5 partidos, con una diferencia de goles de 8:8.</li><li><b>Forma SJK Akatemia:</b> 2 victorias en sus últimos 5 partidos, con una diferencia de goles de 12:9.</li><li><b>Historial H2H:</b> PK-35 Vantaa ganó una vez, perdió una y hubo tres empates en los últimos 5 directos.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 1.92</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-1 (frecuencia: 139/1000)</li><li>1-0 (frecuencia: 131/1000)</li><li>0-0 (frecuencia: 121/1000)</li></ul>"
            }
        },
        'futbol_ibv_afturelding': {
            sport: 'futbol', league: 'Lengjudeild (Islandia)', teams: { local: 'ÍBV Vestmannaeyjar', visitor: 'Afturelding' },
            probabilities: {
                initial_implied: { local: 50.8, draw: 26.8, visitor: 22.4 },
                initial_simulated: { local: 57.1, draw: 27.4, visitor: 15.5 },
                adjusted: { local: 59.0, draw: 26.0, visitor: 15.0 }
            },
            analysis: {
                justification: "La simulación otorga a ÍBV una probabilidad significativamente más alta que las implícitas, y una probabilidad mucho menor para Afturelding. El historial de enfrentamientos directos apoya firmemente a ÍBV, demostrando un dominio histórico. Aunque la forma reciente es similar, el historial de H2H es un diferenciador clave. La confianza de la simulación en ÍBV parece justificada.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Forma ÍBV:</b> 2 victorias en sus últimos 5 partidos, con una diferencia de goles de 5:6.</li><li><b>Forma Afturelding:</b> 2 victorias en sus últimos 5 partidos, con una diferencia de goles de 8:7.</li><li><b>Historial H2H:</b> Fuertemente favorable a ÍBV (3 victorias, 1 derrota, 1 empate en los últimos 5; 12:3 en goles).</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 2.03</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-0 (frecuencia: 173/1000)</li><li>2-0 (frecuencia: 149/1000)</li><li>0-0 (frecuencia: 126/1000)</li></ul>"
            }
        },
        'futbol_breidablik_fram': {
            sport: 'futbol', league: 'Besta deild karla (Islandia)', teams: { local: 'Breiðablik', visitor: 'Fram Reykjavík' },
            probabilities: {
                initial_implied: { local: 58.1, draw: 23.3, visitor: 18.6 },
                initial_simulated: { local: 63.4, draw: 25.1, visitor: 11.5 },
                adjusted: { local: 58.0, draw: 29.0, visitor: 13.0 }
            },
            analysis: {
                justification: "La simulación favorece fuertemente a Breiðablik, más que las probabilidades implícitas. Sin embargo, la forma reciente de ambos equipos es idéntica, lo que sugiere un partido más reñido de lo que implica la simulación. Aunque el historial de enfrentamientos directos favorece ligeramente a Breiðablik, no muestra un dominio abrumador. La probabilidad de empate podría estar subestimada.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Forma Reciente:</b> Ambos equipos tienen 3 victorias en sus últimos 5 partidos. Breiðablik: 8:8 en goles; Fram Reykjavík: 8:6 en goles.</li><li><b>Historial H2H:</b> Breiðablik ganó 3 veces y perdió 2 en los últimos 5 directos.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 2.07</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-0 (frecuencia: 191/1000)</li><li>2-0 (frecuencia: 176/1000)</li><li>0-0 (frecuencia: 126/1000)</li></ul>"
            }
        },
        'futbol_valur_kr': {
            sport: 'futbol', league: 'Besta deild karla (Islandia)', teams: { local: 'Valur Reykjavík', visitor: 'KR Reykjavík' },
            probabilities: {
                initial_implied: { local: 63.2, draw: 21.1, visitor: 15.8 },
                initial_simulated: { local: 65.8, draw: 24.8, visitor: 9.4 },
                adjusted: { local: 69.0, draw: 21.0, visitor: 10.0 }
            },
            analysis: {
                justification: "La simulación favorece fuertemente a Valur, ligeramente más que las probabilidades implícitas. La excelente forma de Valur en casa y su consistencia goleadora son factores muy sólidos. La mala forma reciente de KR, especialmente fuera de casa, justifica la baja probabilidad de victoria visitante. La simulación parece bien alineada con estos factores.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Forma Valur:</b> 3 victorias en sus últimos 5 partidos (10:6 en goles). Han ganado sus últimos 3 partidos en casa y están invictos en 6 partidos en casa, anotando en todos sus partidos en casa esta temporada.</li><li><b>Forma KR:</b> 1 victoria en sus últimos 5 partidos (11:15 en goles). Han perdido 4 de sus últimos 5 partidos fuera de casa.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 2.03</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-0 (frecuencia: 173/1000)</li><li>2-0 (frecuencia: 149/1000)</li><li>0-0 (frecuencia: 126/1000)</li></ul>"
            }
        },
        'futbol_bohemian_shamrock': {
            sport: 'futbol', league: 'League of Ireland Premier Division (Irlanda)', teams: { local: 'Bohemian FC', visitor: 'Shamrock Rovers' },
            probabilities: {
                initial_implied: { local: 17.9, draw: 22.4, visitor: 59.7 },
                initial_simulated: { local: 12.5, draw: 23.5, visitor: 64.0 },
                adjusted: { local: 9.0, draw: 20.0, visitor: 71.0 }
            },
            analysis: {
                justification: "Tanto las probabilidades implícitas como las simuladas favorecen fuertemente a Shamrock Rovers, con la simulación dándoles una probabilidad aún mayor. La forma dominante de Shamrock Rovers, especialmente como visitante, y su posición de liderazgo en la liga son indicadores muy fuertes. La simulación parece justificada en su alta probabilidad para Shamrock Rovers.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Forma Shamrock Rovers:</b> Invicto en 10 partidos, 4 victorias en sus últimos 5. Han ganado sus últimos 4 partidos fuera de casa e invictos en 8 viajes fuera de casa, anotando en sus últimos 10 partidos como visitante. Primer lugar en la liga.</li><li><b>Forma Bohemians:</b> 4 victorias en sus últimos 5 partidos, 4 porterías a cero en ese período.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 2.01</p><p><b>Results más probables (Local-Visitante):</b></p><ul><li>0-2 (frecuencia: 111/1000)</li><li>0-1 (frecuencia: 101/1000)</li><li>0-3 (frecuencia: 98/1000)</li></ul>"
            }
        },
        'futbol_corkcity_drogheda': {
            sport: 'futbol', league: 'League of Ireland Premier Division (Irlanda)', teams: { local: 'Cork City', visitor: 'Drogheda United' },
            probabilities: {
                initial_implied: { local: 35.0, draw: 31.3, visitor: 33.7 },
                initial_simulated: { local: 36.5, draw: 28.2, visitor: 35.3 },
                adjusted: { local: 28.0, draw: 27.0, visitor: 45.0 }
            },
            analysis: {
                justification: "La simulación otorga una ligera ventaja a Drogheda, lo que se alinea con su mejor posición en la liga y su forma reciente. Cork City está luchando significativamente. El historial de enfrentamientos directos y las predicciones de expertos también apuntan a una victoria de Drogheda. Las probabilidades simuladas parecen razonables, pero podrían subestimar ligeramente la ventaja de Drogheda dada la mala forma de Cork City.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Forma Cork City:</b> Décimo lugar en la tabla, sin victorias en sus últimos 5 partidos.</li><li><b>Forma Drogheda United:</b> Tercer lugar en la liga, 1 victoria, 3 empates y 1 derrota en sus últimos 5 partidos.</li><li><b>Último H2H:</b> Victoria de Drogheda por 3-2.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 1.91</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-1 (frecuencia: 139/1000)</li><li>1-0 (frecuencia: 131/1000)</li><li>0-0 (frecuencia: 121/1000)</li></ul>"
            }
        },
        'futbol_sligo_galway': {
            sport: 'futbol', league: 'League of Ireland Premier Division (Irlanda)', teams: { local: 'Sligo Rovers', visitor: 'Galway United' },
            probabilities: {
                initial_implied: { local: 42.9, draw: 28.6, visitor: 28.6 },
                initial_simulated: { local: 45.4, draw: 31.4, visitor: 23.2 },
                adjusted: { local: 35.0, draw: 30.0, visitor: 35.0 }
            },
            analysis: {
                justification: "La simulación favorece ligeramente a Sligo Rovers, más que las probabilidades implícitas. Sin embargo, Galway United está significativamente más arriba en la tabla de la liga, lo que sugiere que son el equipo más fuerte en general. La simulación podría estar sobrevalorando la ventaja de jugar en casa para Sligo Rovers sin tener en cuenta completamente el rendimiento general superior de Galway.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Posición en la Liga:</b> Galway United (7º lugar, 28 puntos en 20 partidos) vs Sligo Rovers (9º lugar, 15 puntos en 20 partidos).</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 1.95</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-1 (frecuencia: 139/1000)</li><li>1-0 (frecuencia: 131/1000)</li><li>0-0 (frecuencia: 121/1000)</li></ul>"
            }
        },
        'futbol_stpatricks_derrycity': {
            sport: 'futbol', league: 'League of Ireland Premier Division (Irlanda)', teams: { local: 'St Patrick\'s Athletic', visitor: 'Derry City' },
            probabilities: {
                initial_implied: { local: 26.7, draw: 26.7, visitor: 46.7 },
                initial_simulated: { local: 20.9, draw: 27.9, visitor: 51.2 },
                adjusted: { local: 19.0, draw: 28.0, visitor: 53.0 }
            },
            analysis: {
                justification: "Tanto las probabilidades implícitas como las simuladas favorecen a Derry City, con la simulación dándoles una ventaja más fuerte. La posición más alta de Derry City en la tabla de la liga, a pesar de haber jugado menos partidos, indica que son el equipo más fuerte. Las probabilidades simuladas parecen razonables y reflejan la clasificación de la liga.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Posición en la Liga:</b> Derry City (4º lugar, 31 puntos en 20 partidos) vs St. Pat's (5º lugar, 30 puntos en 22 partidos).</li><li><b>Lesiones:</b> Ambos equipos tienen lesiones clave.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 2.05</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-1 (frecuencia: 139/1000)</li><li>1-0 (frecuencia: 131/1000)</li><li>0-0 (frecuencia: 121/1000)</li></ul>"
            }
        },
        'futbol_mjondalen_skeid': {
            sport: 'futbol', league: 'Norwegian First Division (Noruega)', teams: { local: 'Mjøndalen IF', visitor: 'Skeid Fotball' },
            probabilities: {
                initial_implied: { local: 45.5, draw: 28.5, visitor: 26.0 },
                initial_simulated: { local: 47.6, draw: 32.2, visitor: 20.2 },
                adjusted: { local: 55.0, draw: 28.0, visitor: 17.0 }
            },
            analysis: {
                justification: "La simulación favorece ligeramente a Mjøndalen. Ambos equipos están en mala forma reciente, con Skeid en una racha aún peor. Sin embargo, el historial de enfrentamientos directos es un factor muy fuerte que indica un dominio histórico de Mjøndalen. A pesar de su forma reciente mixta, este dominio histórico debería hacerlos favoritos más claros.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Forma Mjøndalen:</b> 1 victoria en sus últimos 5 partidos.</li><li><b>Forma Skeid:</b> No tiene victorias en sus últimos 5 partidos (3 derrotas, 2 empates) y ha perdido 3 partidos seguidos.</li><li><b>Historial H2H:</b> Abasadoramente favorable a Mjøndalen (5 victorias en los últimos 5 directos).</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 1.86</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-1 (frecuencia: 139/1000)</li><li>1-0 (frecuencia: 131/1000)</li><li>0-0 (frecuencia: 121/1000)</li></ul>"
            }
        },
        'futbol_sundsvall_trelleborgs': {
            sport: 'futbol', league: 'Superettan (Suecia)', teams: { local: 'GIF Sundsvall', visitor: 'Trelleborgs FF' },
            probabilities: {
                initial_implied: { local: 44.7, draw: 29.8, visitor: 25.5 },
                initial_simulated: { local: 49.9, draw: 29.5, visitor: 20.6 },
                adjusted: { local: 52.0, draw: 28.0, visitor: 20.0 }
            },
            analysis: {
                justification: "La simulación favorece ligeramente a Sundsvall, más que las probabilidades implícitas. Sundsvall está en mejor forma reciente y tiene un historial de enfrentamientos directos favorable. Las probabilidades simuladas parecen bien alineadas con estos factores.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Forma Sundsvall:</b> 3 victorias en sus últimos 5 partidos.</li><li><b>Forma Trelleborgs:</b> 1 victoria en sus últimos 5 partidos.</li><li><b>Historial H2H:</b> Sundsvall ganó 3 veces, perdió 1 y empató 1 en los últimos 5 directos.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 1.89</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-1 (frecuencia: 139/1000)</li><li>1-0 (frecuencia: 131/1000)</li><li>0-0 (frecuencia: 121/1000)</li></ul>"
            }
        },
        'futbol_helsingborg_umea': {
            sport: 'futbol', league: 'Superettan (Suecia)', teams: { local: 'Helsingborgs IF', visitor: 'Umeå FC' },
            probabilities: {
                initial_implied: { local: 49.7, draw: 28.0, visitor: 22.4 },
                initial_simulated: { local: 54.1, draw: 29.0, visitor: 16.9 },
                adjusted: { local: 48.0, draw: 32.0, visitor: 20.0 }
            },
            analysis: {
                justification: "La simulación favorece ligeramente a Helsingborg. Dada la mala forma reciente de ambos equipos y la tendencia de Helsingborg a los empates, la probabilidad de empate podría estar subestimada por la simulación. El partido es probable que sea reñido.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Forma Reciente:</b> Ambos equipos no han ganado en sus últimos 5 partidos. Helsingborg: 4 empates, 1 derrota; Umeå: 2 empates, 3 derrotas.</li><li><b>Historial H2H:</b> No hay datos significativos.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 1.87</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-1 (frecuencia: 139/1000)</li><li>1-0 (frecuencia: 131/1000)</li><li>0-0 (frecuencia: 121/1000)</li></ul>"
            }
        },
        'futbol_defensor_cerro': {
            sport: 'futbol', league: 'Primera División de Uruguay', teams: { local: 'Defensor Sporting', visitor: 'CA Cerro' },
            probabilities: {
                initial_implied: { local: 49.3, draw: 25.4, visitor: 25.4 },
                initial_simulated: { local: 53.1, draw: 28.8, visitor: 18.1 },
                adjusted: { local: 100.0, draw: 0.0, visitor: 0.0 } // Real result was 3-0 for Defensor Sporting
            },
            analysis: {
                justification: "El informe de simulación es para el 23 de junio de 2025. Los datos de fuentes externas indican que el partido ya se jugó en esa fecha, con un resultado final de Defensor Sporting 3-0 CA Cerro. Dado que el resultado del partido ya se conoce, las probabilidades ajustadas deben reflejar el resultado real, anulando cualquier cálculo predictivo. Esto subraya la importancia de la información en tiempo real.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Resultado Real:</b> El partido ya se jugó y el resultado fue 3-0 a favor de Defensor Sporting.</li><li><b>Forma Defensor Sporting:</b> 2 victorias en sus últimos 5 partidos.</li><li><b>Historial H2H:</b> 19 victorias, 12 empates y 6 derrotas a favor de Defensor Sporting en el historial general; 2 victorias y 3 empates en los últimos 5 directos.</li><li><b>Lesiones CA Cerro:</b> Presenta lesiones clave.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 3.0 (Resultado Real)</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-0 (frecuencia: 153/1000)</li><li>0-0 (frecuencia: 141/1000)</li><li>2-0 (frecuencia: 111/1000)</li></ul>"
            }
        },
        'futbol_boston_torque': {
            sport: 'futbol', league: 'Primera División de Uruguay', teams: { local: 'Boston River', visitor: 'Montevideo City Torque' },
            probabilities: {
                initial_implied: { local: 39.7, draw: 31.2, visitor: 29.1 },
                initial_simulated: { local: 40.3, draw: 33.5, visitor: 26.2 },
                adjusted: { local: 43.0, draw: 31.0, visitor: 26.0 }
            },
            analysis: {
                justification: "Las probabilidades implícitas y simuladas son muy cercanas. Boston River tiene una forma reciente ligeramente mejor y un historial de enfrentamientos directos favorable. La simulación parece subestimar ligeramente la probabilidad de victoria de Boston River.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Forma Boston River:</b> 2 victorias en sus últimos 5 partidos.</li><li><b>Forma Montevideo City Torque:</b> 1 victoria en sus últimos 5 partidos.</li><li><b>Historial H2H:</b> Boston River ganó 2, perdió 1 y empató 2 en los últimos 5 directos; marcador global de 6:4 a su favor.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 1.86</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-1 (frecuencia: 139/1000)</li><li>1-0 (frecuencia: 131/1000)</li><li>0-0 (frecuencia: 121/1000)</li></ul>"
            }
        },
        'futbol_stlouis2_thetown': {
            sport: 'futbol', league: 'MLS Next Pro (Estados Unidos)', teams: { local: 'St. Louis City SC 2', visitor: 'The Town FC' },
            probabilities: {
                initial_implied: { local: 61.5, draw: 23.1, visitor: 15.4 },
                initial_simulated: { local: 67.3, draw: 22.9, visitor: 9.8 },
                adjusted: { local: 68.0, draw: 22.0, visitor: 10.0 }
            },
            analysis: {
                justification: "La simulación favorece fuertemente a St. Louis CITY2, más que las probabilidades implícitas. La excelente forma reciente de St. Louis CITY2 y su dominio en casa justifican que sean favoritos. La racha invicta de The Town FC es notable, pero la simulación ya les da una probabilidad baja.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Forma St. Louis CITY2:</b> 4 victorias consecutivas, 14 goles marcados en ese período. Mejor récord en casa en la Conferencia Oeste (4-1-1).</li><li><b>Forma The Town FC:</b> 6 partidos invicto.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 2.07</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-0 (frecuencia: 191/1000)</li><li>2-0 (frecuencia: 176/1000)</li><li>0-0 (frecuencia: 126/1000)</li></ul>"
            }
        },
        'futbol_sandiego_washington': {
            sport: 'futbol', league: 'NWSL (Estados Unidos)', teams: { local: 'San Diego Wave', visitor: 'Washington Spirit' },
            probabilities: {
                initial_implied: { local: 50.9, draw: 26.2, visitor: 22.9 },
                initial_simulated: { local: 56.8, draw: 27.5, visitor: 15.7 },
                adjusted: { local: 57.0, draw: 28.0, visitor: 15.0 }
            },
            analysis: {
                justification: "La simulación favorece significativamente a San Diego Wave, más que las probabilidades implícitas. La fuerte ofensiva y la posición en la liga de San Diego Wave, junto con la lesión de un jugador clave del Washington Spirit, justifican que sean favoritos. Los empates previos sugieren que el partido podría ser reñido, pero la forma actual de San Diego Wave es un factor dominante.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Posición en la Liga:</b> San Diego Wave en tercer lugar en la NWSL, segundo mayor número de goles a favor (25).</li><li><b>Lesiones Washington Spirit:</b> Ashley Hatch lesionada.</li><li><b>Historial H2H:</b> Dos partidos de 2024 terminaron en empates 1-1.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 2.03</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-0 (frecuencia: 173/1000)</li><li>2-0 (frecuencia: 149/1000)</li><li>0-0 (frecuencia: 126/1000)</li></ul>"
            }
        },
        'futbol_dinamo_bunyodkor': {
            sport: 'futbol', league: 'Uzbek Super League (Uzbekistán)', teams: { local: 'Dinamo Samarqand', visitor: 'Bunyodkor PFK' },
            probabilities: {
                initial_implied: { local: 26.0, draw: 28.5, visitor: 45.5 },
                initial_simulated: { local: 23.3, draw: 30.6, visitor: 46.1 },
                adjusted: { local: 38.0, draw: 30.0, visitor: 32.0 }
            },
            analysis: {
                justification: "La simulación favorece a Bunyodkor PFK, aunque ligeramente menos que las probabilidades implícitas. La forma reciente de Dinamo Samarqand es muy buena, mientras que Bunyodkor PFK está en una racha sin victorias. Sin embargo, el historial de enfrentamientos directos es fuertemente favorable a Bunyodkor PFK. Este contraste entre la forma reciente y el H2H sugiere que la simulación podría estar sobrevalorando a Bunyodkor PFK.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Forma Dinamo Samarqand:</b> 4 victorias en sus últimos 5 partidos.</li><li><b>Forma Bunyodkor PFK:</b> No tiene victorias en sus últimos 5 partidos (3 empates, 2 derrotas) y ha perdido 2 partidos seguidos.</li><li><b>Historial H2H:</b> Fuertemente favorable a Bunyodkor PFK (perdió 4 veces y empató 1 en los últimos 5 directos).</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 1.95</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-1 (frecuencia: 139/1000)</li><li>1-0 (frecuencia: 131/1000)</li><li>0-0 (frecuencia: 121/1000)</li></ul>"
            }
        },
        'futbol_portugal_nigeria': {
            sport: 'futbol', league: 'Amistoso Internacional', teams: { local: 'Portugal', visitor: 'Nigeria' },
            probabilities: {
                initial_implied: { local: 35.3, draw: 29.4, visitor: 35.3 },
                initial_simulated: { local: 31.8, draw: 30.5, visitor: 37.7 },
                adjusted: { local: 30.0, draw: 30.0, visitor: 40.0 }
            },
            analysis: {
                justification: "La simulación otorga una ligera ventaja a Nigeria, más que las probabilidades implícitas. La ausencia de una jugadora clave para Portugal, combinada con la naturaleza de un partido amistoso, podría hacer que el resultado sea más incierto. La simulación parece reflejar una ligera inclinación hacia Nigeria, lo cual es razonable dada la lesión de Portugal.",
                factors: "<h3>Factores Clave:</h3><ul><li><b>Lesiones Portugal:</b> Kika Nazareth, mediocampista ofensiva clave, está lesionada y no jugará.</li><li><b>Naturaleza del Partido:</b> Es un amistoso, lo que puede llevar a resultados menos predecibles.</li></ul>",
                sim_data: "<h3>Datos de Simulación Inicial:</h3><p><b>Promedio de Goles Totales:</b> 1.94</p><p><b>Resultados más probables (Local-Visitante):</b></p><ul><li>1-1 (frecuencia: 139/1000)</li><li>1-0 (frecuencia: 131/1000)</li><li>0-0 (frecuencia: 121/1000)</li></ul>"
            }
        }
    };

    let adjustedProbChart = null;
    let comparisonProbChart = null;
    const mainContentArea = document.getElementById('main-content-area');
    const welcomeScreen = document.getElementById('welcome-screen');

    function initializeApp() {
        populateMatchList();
        setupFilters();
        mainContentArea.style.display = 'none';
        welcomeScreen.style.display = 'flex';
    }

    function populateMatchList(filter = 'all') {
        const listContainer = document.getElementById('match-list');
        listContainer.innerHTML = '';
        
        const leagues = {};
        Object.keys(matchData).forEach(id => {
            const match = matchData[id];
            // Normalize sport names to lowercase and remove accents for filtering
            const normalizedSport = match.sport.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");

            if (filter === 'all' || normalizedSport === filter) {
                if (!leagues[match.league]) {
                    leagues[match.league] = [];
                }
                leagues[match.league].push({ id, ...match });
            }
        });

        Object.keys(leagues).sort().forEach(league => {
            const leagueHeader = document.createElement('h3');
            leagueHeader.className = 'px-2 pt-4 pb-1 text-sm font-semibold text-gray-500';
            leagueHeader.textContent = league;
            listContainer.appendChild(leagueHeader);

            leagues[league].forEach(match => {
                const item = document.createElement('a');
                item.href = '#';
                item.className = 'sidebar-item block px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors duration-150';
                item.textContent = `${match.teams.local} vs ${match.teams.visitor}`;
                item.dataset.matchId = match.id;
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    renderMatchDetails(match.id);
                    document.querySelectorAll('.sidebar-item').forEach(el => el.classList.remove('active'));
                    item.classList.add('active');
                });
                listContainer.appendChild(item);
            });
        });
    }
    
    function setupFilters() {
        const filters = {
            'all': document.getElementById('filter-all'),
            'mlb': document.getElementById('filter-mlb'),
            'futbol': document.getElementById('filter-futbol')
        };
        
        Object.keys(filters).forEach(key => {
            filters[key].addEventListener('click', () => {
                populateMatchList(key);
                Object.values(filters).forEach(btn => btn.classList.remove('bg-[#0d7377]', 'text-white'));
                Object.values(filters).forEach(btn => btn.classList.add('bg-gray-100', 'text-gray-700'));
                filters[key].classList.add('bg-[#0d7377]', 'text-white');
                filters[key].classList.remove('bg-gray-100', 'text-gray-700');
            });
        });
    }

    function renderMatchDetails(matchId) {
        welcomeScreen.style.display = 'none';
        mainContentArea.style.display = 'block';

        const data = matchData[matchId];
        document.getElementById('match-title').textContent = `${data.teams.local} vs ${data.teams.visitor}`;
        document.getElementById('match-league').textContent = data.league;
        
        renderTabs(matchId);
        renderAdjustedProbChart(data);
        renderComparisonChart(data);
    }
    
    function renderTabs(matchId) {
        const data = matchData[matchId];
        const tabsContainer = document.getElementById('tabs');
        const tabContentContainer = document.getElementById('tab-content');

        tabsContainer.innerHTML = `
            <button class="tab-btn p-4 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 active" data-tab="justification">Resumen del Ajuste</button>
            <button class="tab-btn p-4 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="factors">Factores Clave</button>
            <button class="tab-btn p-4 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="sim_data">Datos de Simulación</button>
        `;
        tabContentContainer.innerHTML = data.analysis.justification;

        tabsContainer.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                tabsContainer.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                tabContentContainer.innerHTML = data.analysis[btn.dataset.tab];
            });
        });
    }

    function renderAdjustedProbChart(data) {
        const ctx = document.getElementById('adjustedProbChart').getContext('2d');
        if (adjustedProbChart) {
            adjustedProbChart.destroy();
        }

        const adjustedProbs = data.probabilities.adjusted;
        const labels = Object.keys(adjustedProbs).map(k => {
            if (k === 'local') return data.teams.local;
            if (k === 'visitor') return data.teams.visitor;
            return 'Empate';
        });
        const chartData = Object.values(adjustedProbs);
        
        adjustedProbChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Probabilidad Ajustada',
                    data: chartData,
                    backgroundColor: ['#32a1a1', '#e6f1f2', '#146c70'],
                    borderColor: '#ffffff',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom' },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return `${context.label}: ${context.raw.toFixed(1)}%`;
                            }
                        }
                    }
                }
            }
        });
    }

    function renderComparisonChart(data) {
        const ctx = document.getElementById('comparisonProbChart').getContext('2d');
        if (comparisonProbChart) {
            comparisonProbChart.destroy();
        }

        const { initial_implied, initial_simulated, adjusted } = data.probabilities;
        const isMlb = data.sport === 'MLB';
        
        let local_sim = initial_simulated.local;
        let visitor_sim = initial_simulated.visitor;

        // If MLB and initial simulated had a draw, redistribute draw probability proportionally to local/visitor
        if (isMlb && initial_simulated.draw > 0) {
            const totalWinProb = initial_simulated.local + initial_simulated.visitor;
            if (totalWinProb > 0) {
                local_sim += (initial_simulated.local / totalWinProb) * initial_simulated.draw;
                visitor_sim += (initial_simulated.visitor / totalWinProb) * initial_simulated.draw;
            }
        }
        
        const labels = [data.teams.local, data.teams.visitor];
        if (!isMlb) {
            labels.push('Empate');
        }

        const datasets = [
            {
                label: 'Prob. Simulada',
                data: isMlb ? [local_sim, visitor_sim] : [initial_simulated.local, initial_simulated.visitor, initial_simulated.draw],
                backgroundColor: '#e6f1f2',
                borderColor: '#cddce0',
                borderWidth: 1
            },
            {
                label: 'Prob. Implícita',
                data: isMlb ? [initial_implied.local, initial_implied.visitor] : [initial_implied.local, initial_implied.visitor, initial_implied.draw],
                backgroundColor: '#32a1a1',
                borderColor: '#2a8a8a',
                borderWidth: 1
            },
            {
                label: 'Prob. Ajustada',
                data: isMlb ? [adjusted.local, adjusted.visitor] : [adjusted.local, adjusted.visitor, adjusted.draw],
                backgroundColor: '#146c70',
                borderColor: '#105659',
                borderWidth: 1
            }
        ];
        
        comparisonProbChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: datasets
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        title: {
                            display: true,
                            text: 'Probabilidad (%)'
                        }
                    }
                },
                plugins: {
                    legend: { position: 'top' },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return `${context.dataset.label}: ${context.raw.toFixed(1)}%`;
                            }
                        }
                    },
                    subtitle: {
                        display: isMlb,
                        text: 'Nota: La probabilidad de "Empate" de la simulación de MLB se ha redistribuido.',
                        padding: {
                            bottom: 10
                        }
                    }
                }
            }
        });
    }

    initializeApp();
});
</script>

</body>
</html>
